<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¸åœˆç”Ÿæ¶¯æ¨¡æ‹Ÿå™¨ - ç»“å±€æµ·æŠ¥é¢„è§ˆ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Noto Sans SC', 'Microsoft YaHei', sans-serif;
            background: #0d0d12;
            color: #eaecef;
            min-height: 100vh;
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 28px;
            background: linear-gradient(90deg, #0ecb81, #f0b90b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }
        .header p {
            color: #848e9c;
            font-size: 14px;
        }
        .preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .poster-card {
            background: #16161e;
            border-radius: 12px;
            padding: 16px;
            border: 1px solid #2b3139;
        }
        .poster-label {
            font-size: 12px;
            color: #848e9c;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .poster-container {
            width: 100%;
            aspect-ratio: 3/5;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
        }
        canvas {
            width: 100%;
            height: 100%;
        }
        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin-top: 12px;
        }
        .btn {
            padding: 10px 8px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }
        .btn-primary {
            background: #0ecb81;
            color: #000;
        }
        .btn-primary:hover {
            background: #0dba75;
        }
        .btn-secondary {
            background: #2b3139;
            color: #eaecef;
            border: 1px solid #3b4149;
        }
        .btn-secondary:hover {
            background: #3b4149;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸª™ å¸åœˆç”Ÿæ¶¯æ¨¡æ‹Ÿå™¨</h1>
        <p>ç»“å±€æµ·æŠ¥æ ·å¼é¢„è§ˆ - ä¸åŒç¨€æœ‰åº¦çš„è§†è§‰å·®å¼‚</p>
    </div>

    <div class="preview-grid">
        <!-- Common -->
        <div class="poster-card">
            <div class="poster-label">âšª Common - å¹³å‡¡ç»“å±€</div>
            <div class="poster-container">
                <canvas id="canvas-common"></canvas>
            </div>
            <div class="controls">
                <button class="btn btn-primary" onclick="downloadPoster('common')">ğŸ’¾ ä¿å­˜</button>
                <button class="btn btn-secondary" onclick="shareTwitter('common')">ğŸ¦ åˆ†äº«</button>
            </div>
        </div>

        <!-- Uncommon -->
        <div class="poster-card">
            <div class="poster-label">ğŸŸ¢ Uncommon - å°‘è§ç»“å±€</div>
            <div class="poster-container">
                <canvas id="canvas-uncommon"></canvas>
            </div>
            <div class="controls">
                <button class="btn btn-primary" onclick="downloadPoster('uncommon')">ğŸ’¾ ä¿å­˜</button>
                <button class="btn btn-secondary" onclick="shareTwitter('uncommon')">ğŸ¦ åˆ†äº«</button>
            </div>
        </div>

        <!-- Rare -->
        <div class="poster-card">
            <div class="poster-label">ğŸ”µ Rare - ç¨€æœ‰ç»“å±€</div>
            <div class="poster-container">
                <canvas id="canvas-rare"></canvas>
            </div>
            <div class="controls">
                <button class="btn btn-primary" onclick="downloadPoster('rare')">ğŸ’¾ ä¿å­˜</button>
                <button class="btn btn-secondary" onclick="shareTwitter('rare')">ğŸ¦ åˆ†äº«</button>
            </div>
        </div>

        <!-- Epic -->
        <div class="poster-card">
            <div class="poster-label">ğŸŸ£ Epic - å²è¯—ç»“å±€</div>
            <div class="poster-container">
                <canvas id="canvas-epic"></canvas>
            </div>
            <div class="controls">
                <button class="btn btn-primary" onclick="downloadPoster('epic')">ğŸ’¾ ä¿å­˜</button>
                <button class="btn btn-secondary" onclick="shareTwitter('epic')">ğŸ¦ åˆ†äº«</button>
            </div>
        </div>

        <!-- Legendary -->
        <div class="poster-card">
            <div class="poster-label">ğŸŸ  Legendary - ä¼ å¥‡ç»“å±€</div>
            <div class="poster-container">
                <canvas id="canvas-legendary"></canvas>
            </div>
            <div class="controls">
                <button class="btn btn-primary" onclick="downloadPoster('legendary')">ğŸ’¾ ä¿å­˜</button>
                <button class="btn btn-secondary" onclick="shareTwitter('legendary')">ğŸ¦ åˆ†äº«</button>
            </div>
        </div>

        <!-- Mythic -->
        <div class="poster-card">
            <div class="poster-label">ğŸ”´ Mythic - ç¥è¯ç»“å±€</div>
            <div class="poster-container">
                <canvas id="canvas-mythic"></canvas>
            </div>
            <div class="controls">
                <button class="btn btn-primary" onclick="downloadPoster('mythic')">ğŸ’¾ ä¿å­˜</button>
                <button class="btn btn-secondary" onclick="shareTwitter('mythic')">ğŸ¦ åˆ†äº«</button>
            </div>
        </div>

        <!-- Supreme -->
        <div class="poster-card">
            <div class="poster-label">ğŸŸ¡ Supreme - è‡³é«˜ç»“å±€</div>
            <div class="poster-container">
                <canvas id="canvas-supreme"></canvas>
            </div>
            <div class="controls">
                <button class="btn btn-primary" onclick="downloadPoster('supreme')">ğŸ’¾ ä¿å­˜</button>
                <button class="btn btn-secondary" onclick="shareTwitter('supreme')">ğŸ¦ åˆ†äº«</button>
            </div>
        </div>
    </div>

    <script>
        // æµ·æŠ¥é…ç½® - 600x1000 ç«–ç‰ˆ
        const POSTER_CONFIG = {
            common: {
                title: 'å¸åœˆè·¯äººç”²',
                rarity: 'common',
                rarityName: 'COMMON',
                story: [
                    'ä½ åœ¨å¸åœˆæ··äº†å‡ å¹´ï¼Œèµšè¿‡ä¹Ÿäºè¿‡ï¼Œæœ€åç®—ä¸‹æ¥ä¸ç—›ä¸ç—’ã€‚',
                    'æ²¡æœ‰æš´å¯Œçš„ä¼ è¯´ï¼Œä¹Ÿæ²¡æœ‰å½’é›¶çš„æƒ¨å‰§ã€‚',
                    'ä½ å°±æ˜¯é‚£ç§åœ¨ç¾¤é‡Œä»ä¸å‘è¨€ã€æŒä»“æ°¸è¿œä¸æ•¢æ¢­å“ˆçš„è·¯äººç”²ã€‚',
                    'ç¦»å¼€çš„é‚£å¤©ä½ é€€äº†ç¾¤ï¼Œæ²¡äººæ³¨æ„åˆ°ã€‚',
                    'ä½ å›å½’æ­£å¸¸ç”Ÿæ´»ï¼Œå¶å°”åœ¨æ–°é—»é‡Œçœ‹åˆ°å¸åœˆæ¶ˆæ¯ï¼Œä¼šå¿ƒä¸€ç¬‘ã€‚',
                    'åƒåœ¨è¯´ï¼šé‚£å‡ å¹´ï¼Œæˆ‘ä¹Ÿåœ¨ã€‚'
                ],
                wealth: 12500,
                fans: 1200,
                path: 'KOLåšä¸»',
                unlockedAchievements: [
                    { name: 'åˆå…¥å¸åœˆ', rarity: 'common' },
                    { name: 'KOL ä¹‹è·¯', rarity: 'common' }
                ],
                color: '#9ca3af',
                bgColors: ['#1a1a1a', '#252525'],
                borderWidth: 2,
                hasGlow: false,
                hasAnimation: false
            },
            uncommon: {
                title: 'å°å¯Œå³å®‰',
                rarity: 'uncommon',
                rarityName: 'UNCOMMON',
                story: [
                    'ä½ åœ¨å¸åœˆèµšåˆ°äº†å‡ ç™¾ä¸‡ï¼Œæ²¡æœ‰è´ªå¿ƒç»§ç»­å†²ï¼Œè€Œæ˜¯æœæ–­å¥—ç°ã€‚',
                    'ä½ ä¹°äº†æˆ¿ä¹°äº†è½¦ï¼Œå‰©ä¸‹çš„é’±å­˜èµ·æ¥åƒåˆ©æ¯ã€‚',
                    'æœ‹å‹é—®ä½ ä¸ºå•¥ä¸ç»§ç»­ç©ï¼Œä½ è¯´å¤Ÿäº†ï¼Œå†ç©å°±æ˜¯èµŒäº†ã€‚',
                    'ä½ è¾æ‰äº†ä¸å–œæ¬¢çš„å·¥ä½œï¼Œæ‰¾äº†ä¸€ä»½æ¸…é—²çš„æ´»å„¿ã€‚',
                    'æ¯å¤©ç¡åˆ°è‡ªç„¶é†’ï¼Œå›å¤´æƒ³æƒ³ï¼ŒåŠ å…¥å¸åœˆæ˜¯ä½ äººç”Ÿæœ€é‡è¦çš„å†³å®šä¹‹ä¸€ã€‚',
                    'ä½†åŠæ—¶ç¦»å¼€ï¼Œä¹Ÿæ˜¯ã€‚'
                ],
                wealth: 3200000,
                fans: 15000,
                path: 'æŠ•é¡¹ç›®',
                unlockedAchievements: [
                    { name: 'åˆå…¥å¸åœˆ', rarity: 'common' },
                    { name: 'å°å¯Œå³å®‰', rarity: 'uncommon' },
                    { name: 'æŠ•èµ„äºº', rarity: 'common' }
                ],
                color: '#22c55e',
                bgColors: ['#0a1f0a', '#122812'],
                borderWidth: 3,
                hasGlow: true,
                hasAnimation: false
            },
            rare: {
                title: 'ç¯æ¸¸ä¸–ç•Œ',
                rarity: 'rare',
                rarityName: 'RARE',
                story: [
                    'ä½ ç¦»å¼€äº†å¸åœˆï¼Œå¸¦ç€å¥—ç°çš„é’±å¼€å§‹ç¯æ¸¸ä¸–ç•Œã€‚',
                    'ä½ è§è¿‡å†°å²›çš„æå…‰ã€æ’’å“ˆæ‹‰çš„æ˜Ÿç©ºã€äº¬éƒ½çš„æ¨±èŠ±ã€‚',
                    'ä½ ç«™åœ¨æ¯ä¸€ä¸ªé£æ™¯å‰éƒ½ä¼šæƒ³ï¼šå¦‚æœä¸æ˜¯å½“å¹´é‚£ä¸ªå†³å®šï¼Œ',
                    'æˆ‘å¯èƒ½ä¸€è¾ˆå­ä¹Ÿçœ‹ä¸åˆ°è¿™äº›ã€‚',
                    'æœ€åä½ åœ¨æµ·è¾¹çš„ä¸€åº§å°åŸå®šå±…ï¼Œæ¯å¤©çœ‹æ—¥è½ã€‚',
                    'ä¸´ç»ˆå‰ä½ å›æœ›è¿™ä¸€ç”Ÿï¼Œè§‰å¾—åŠ å…¥å¸åœˆï¼ŒçœŸæ˜¯ä½ äººç”Ÿæœ€é‡è¦çš„å†³å®šä¹‹ä¸€ã€‚'
                ],
                wealth: 28000000,
                fans: 85000,
                path: 'ç‚’å¸',
                unlockedAchievements: [
                    { name: 'ç™¾ä¸‡å¯Œç¿', rarity: 'rare' },
                    { name: 'ç¯æ¸¸ä¸–ç•Œ', rarity: 'rare' },
                    { name: 'ç‚’å¸æˆç˜¾', rarity: 'common' }
                ],
                color: '#3b82f6',
                bgColors: ['#0a1629', '#122240'],
                borderWidth: 4,
                hasGlow: true,
                hasAnimation: false
            },
            epic: {
                title: 'æå‰é€€ä¼‘',
                rarity: 'epic',
                rarityName: 'EPIC',
                story: [
                    'ä½ åœ¨å››åå²å‰æ”’å¤Ÿäº†è¢«åŠ¨æ”¶å…¥ï¼Œæœæ–­é€€ä¼‘ã€‚',
                    'æœ‰äººéª‚ä½ èººå¹³ï¼Œä½ åªæ˜¯ç¬‘ç¬‘ã€‚',
                    'ä½ æ¯å¤©è¯»ä¹¦ã€æ—…è¡Œã€é™ªå®¶äººï¼Œå†ä¹Ÿä¸ç”¨åœ¨æ—©é«˜å³°æŒ¤åœ°é“ã€‚',
                    'å¶å°”ä½ è¿˜ä¼šçœ‹çœ‹è¡Œæƒ…ï¼Œä½†å†ä¹Ÿä¸ä¸ºæ¶¨è·Œå¿ƒè·³ã€‚',
                    'ä½ è§‰å¾—è‡ªå·±æœ€å¤§çš„æˆåŠŸä¸æ˜¯èµšäº†å¤šå°‘é’±ï¼Œ',
                    'è€Œæ˜¯ä¹°å›äº†è‡ªå·±çš„æ—¶é—´ã€‚'
                ],
                wealth: 156000000,
                fans: 420000,
                path: 'è´¨æŠ¼/DeFi',
                unlockedAchievements: [
                    { name: 'åƒä¸‡å¤§ä½¬', rarity: 'epic' },
                    { name: 'æå‰é€€ä¼‘', rarity: 'epic' },
                    { name: 'èººèµšå…š', rarity: 'common' },
                    { name: 'æ¨¡æ‹Ÿåå±€', rarity: 'uncommon' }
                ],
                color: '#a855f7',
                bgColors: ['#1a0a2e', '#2d124d'],
                borderWidth: 5,
                hasGlow: true,
                hasAnimation: true
            },
            legendary: {
                title: 'è´¢å¯Œè‡ªç”±',
                rarity: 'legendary',
                rarityName: 'LEGENDARY',
                story: [
                    'ä½ çš„è¢«åŠ¨æ”¶å…¥æ—©å·²è¦†ç›–ä¸€åˆ‡å¼€é”€ï¼Œä½ ä¸å†ä¸ºé’±åšä»»ä½•ä¸æƒ³åšçš„äº‹ã€‚',
                    'ä½ ä¹°äº†æƒ³ä¹°çš„è½¦ï¼Œå»äº†æƒ³å»çš„åœ°æ–¹ï¼Œå¸®äº†æƒ³å¸®çš„äººã€‚',
                    'æœ‰äººé—®ä½ è´¢å¯Œè‡ªç”±æ˜¯ä»€ä¹ˆæ„Ÿè§‰ï¼Œä½ è¯´ï¼Œ',
                    'å°±æ˜¯æ¯å¤©æ—©ä¸Šé†’æ¥ï¼Œå¯ä»¥åªé—®è‡ªå·±ã€Œä»Šå¤©æƒ³å¹²å˜›ã€ã€‚',
                    'è€Œä¸æ˜¯ã€Œä»Šå¤©è¯¥å¹²å˜›ã€ã€‚',
                    'ä½ ç¦»å¼€å¸åœˆåå¼€å§‹ç¯æ¸¸ä¸–ç•Œï¼Œè§åˆ°äº†å„ç§å„æ ·ç¾ä¸½çš„é£æ™¯ã€‚'
                ],
                wealth: 890000000,
                fans: 1200000,
                path: 'å‘å¸/åœŸç‹—',
                unlockedAchievements: [
                    { name: 'äº¿ä¸‡èº«å®¶', rarity: 'legendary' },
                    { name: 'è´¢å¯Œè‡ªç”±', rarity: 'legendary' },
                    { name: 'å‘å¸äºº', rarity: 'common' },
                    { name: 'é¡¶æµ', rarity: 'epic' },
                    { name: 'ç™¾å€æš´å¯Œ', rarity: 'rare' }
                ],
                color: '#f97316',
                bgColors: ['#1a0f00', '#3d1f00'],
                borderWidth: 6,
                hasGlow: true,
                hasAnimation: true
            },
            mythic: {
                title: 'æˆä¸ºé¦–å¯Œ',
                rarity: 'mythic',
                rarityName: 'MYTHIC',
                story: [
                    'ä½ ç™»é¡¶å…¨çƒè´¢å¯Œæ¦œçš„é‚£å¤©ï¼Œæ²¡æœ‰åº†ç¥ï¼Œåªæ˜¯ä¸€ä¸ªäººååœ¨åŠå…¬å®¤é‡Œå‘å‘†ã€‚',
                    'ä½ æƒ³èµ·å¾ˆå¤šå¹´å‰ç¬¬ä¸€æ¬¡ä¹°å¸æ—¶çš„ç´§å¼ å’ŒæœŸå¾…ã€‚',
                    'å¦‚ä»Šä½ æ¯å¤©é†’æ¥éƒ½åœ¨æƒ³æ€ä¹ˆæŠŠé’±èŠ±åœ¨æœ‰æ„ä¹‰çš„åœ°æ–¹ã€‚',
                    'ä½ å»ºå­¦æ ¡ã€æåŒ»é™¢ã€æç§‘ç ”ï¼Œæœ‰äººè¯´ä½ åœ¨èµç½ªã€‚',
                    'ä½ è¯´ä½ åªæ˜¯åœ¨åšè§‰å¾—å¯¹çš„äº‹ã€‚',
                    'é¦–å¯Œå¯¹ä½ æ¥è¯´åªæ˜¯ä¸€ä¸ªæ•°å­—ï¼Œä½ æ›´åœ¨æ„çš„æ˜¯èº«ååã€‚'
                ],
                wealth: 5200000000,
                fans: 8800000,
                path: 'æŠ•é¡¹ç›®',
                unlockedAchievements: [
                    { name: 'åˆå…¥å¸åœˆ', rarity: 'common' },
                    { name: 'å°å¯Œå³å®‰', rarity: 'uncommon' },
                    { name: 'æŠ•èµ„äºº', rarity: 'common' }
                ],
                color: '#ef4444',
                bgColors: ['#1a0505', '#3d0f0f'],
                borderWidth: 7,
                hasGlow: true,
                hasAnimation: true
            },
            supreme: {
                title: 'æ´»æˆä¼ è¯´',
                rarity: 'supreme',
                rarityName: 'SUPREME',
                story: [
                    'æ²¡äººçŸ¥é“ä½ çš„çœŸåï¼Œæ²¡äººè§è¿‡ä½ çš„è„¸ï¼Œä½†é“¾ä¸Šæ¯ä¸€ä¸ªè§’è½éƒ½æœ‰ä½ çš„ä¼ è¯´ã€‚',
                    'ä½ çš„åœ°å€åŠ¨ä¸€åŠ¨ï¼Œå¸‚åœºå°±æŠ–ä¸‰æŠ–ã€‚',
                    'ä½ ä»ä¸æ¥å—é‡‡è®¿ï¼Œä»ä¸éœ²é¢ï¼Œåƒå¹½çµä¸€æ ·å­˜åœ¨ã€‚',
                    'æœ‰äººè¯´ä½ å·²ç»æ­»äº†ï¼Œæœ‰äººè¯´ä½ ç§»æ°‘ç«æ˜Ÿäº†ã€‚',
                    'åªæœ‰ä½ çŸ¥é“ï¼Œä½ åªæ˜¯é€‰æ‹©äº†å¦ä¸€ç§æ´»æ³•ã€‚',
                    'ä¸éœ€è¦ä»»ä½•äººè®¤å¯ï¼Œé“¾ä¸Šè‡ªæœ‰å…¬é“ã€‚'
                ],
                wealth: 50000000000,
                fans: 0,
                path: 'ç¥ç§˜è·¯å¾„',
                unlockedAchievements: [
                    { name: 'åäº¿èº«å®¶', rarity: 'mythic' },
                    { name: 'æ´»æˆä¼ è¯´', rarity: 'supreme' },
                    { name: 'é“¾ä¸Šä¼ è¯´', rarity: 'supreme' },
                    { name: 'åƒå€æš´å¯Œ', rarity: 'epic' },
                    { name: 'å…ˆå¤©åœ£ä½“', rarity: 'rare' }
                ],
                color: '#facc15',
                bgColors: ['#0a0a00', '#1a1500'],
                borderWidth: 8,
                hasGlow: true,
                hasAnimation: true
            }
        };

        function formatNumber(n) {
            const num = Number(n) || 0;
            const isNegative = num < 0;
            const absNum = Math.abs(num);
            
            let result;
            if (absNum >= 1e15) result = (absNum/1e15).toFixed(1) + 'aa';
            else if (absNum >= 1e12) result = (absNum/1e12).toFixed(1) + 'T';
            else if (absNum >= 1e9) result = (absNum/1e9).toFixed(1) + 'B';
            else if (absNum >= 1e6) result = (absNum/1e6).toFixed(1) + 'M';
            else if (absNum >= 1e3) result = (absNum/1e3).toFixed(1) + 'K';
            else result = absNum.toString();
            
            return isNegative ? '-' + result : result;
        }

        function drawPoster(canvasId, config) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            const width = 600;
            const height = 1000;
            canvas.width = width;
            canvas.height = height;

            // 1. èƒŒæ™¯æ¸å˜
            const gradient = ctx.createLinearGradient(0, 0, 0, height);
            config.bgColors.forEach((color, i) => {
                gradient.addColorStop(i / (config.bgColors.length - 1), color);
            });
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, height);

            // 2. è¾¹æ¡†
            ctx.strokeStyle = config.color;
            ctx.lineWidth = config.borderWidth;
            ctx.strokeRect(config.borderWidth/2, config.borderWidth/2, 
                          width - config.borderWidth, height - config.borderWidth);

            // 3. å†…è¾¹æ¡†è£…é¥°ï¼ˆé«˜ç¨€æœ‰åº¦ï¼‰
            if (config.rarity !== 'common') {
                ctx.strokeStyle = config.color + '40';
                ctx.lineWidth = 1;
                ctx.strokeRect(20, 20, width - 40, height - 40);
            }

            // 4. å…‰æ•ˆï¼ˆé«˜ç¨€æœ‰åº¦ï¼‰
            if (config.hasGlow) {
                const glowGradient = ctx.createRadialGradient(width/2, height/2, 50, width/2, height/2, 400);
                glowGradient.addColorStop(0, config.color + '20');
                glowGradient.addColorStop(1, 'transparent');
                ctx.fillStyle = glowGradient;
                ctx.fillRect(0, 0, width, height);
            }

            let y = 60;

            // 5. æ ‡é¢˜
            ctx.fillStyle = '#eaecef';
            ctx.font = 'bold 22px "Noto Sans SC", sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('ğŸª™ å¸åœˆç”Ÿæ¶¯æ¨¡æ‹Ÿå™¨', width/2, y);
            y += 50;

            // 6. ç»“å±€æ ‡é¢˜ï¼ˆå¸¦ç¨€æœ‰åº¦é¢œè‰²ï¼‰
            ctx.fillStyle = config.color;
            ctx.font = `bold ${config.rarity === 'supreme' ? 48 : config.rarity === 'mythic' ? 44 : 40}px "Noto Sans SC", sans-serif`;
            ctx.textAlign = 'center';
            
            if (config.hasGlow) {
                ctx.shadowColor = config.color;
                ctx.shadowBlur = 20;
            }
            ctx.fillText(config.title, width/2, y);
            ctx.shadowBlur = 0;
            y += 40;

            // 7. ç¨€æœ‰åº¦æ ‡ç­¾
            ctx.fillStyle = config.color;
            ctx.font = 'bold 13px "Noto Sans SC", sans-serif';
            ctx.fillText(config.rarityName, width/2, y);
            y += 45;

            // 8. ç©å®¶ä¿¡æ¯ï¼ˆç´§å‡‘ï¼‰
            ctx.fillStyle = '#848e9c';
            ctx.font = '13px "Noto Sans SC", sans-serif';
            ctx.fillText('CryptoKing Â· ' + config.path, width/2, y);
            y += 35;

            // 9. æ•°æ®å¡ç‰‡ï¼ˆåªæ˜¾ç¤ºè´¢å¯Œå’Œç²‰ä¸ï¼‰
            const stats = [
                { icon: 'ğŸ’°', value: formatNumber(config.wealth), label: 'è´¢å¯Œ' },
                { icon: 'ğŸ‘¥', value: formatNumber(config.fans), label: 'ç²‰ä¸' }
            ];

            const cardWidth = 120;
            const gap = 20;
            const startX = (width - (cardWidth * 2 + gap)) / 2;

            stats.forEach((stat, i) => {
                const x = startX + i * (cardWidth + gap);
                
                // å¡ç‰‡èƒŒæ™¯
                ctx.fillStyle = 'rgba(0,0,0,0.3)';
                ctx.fillRect(x, y, cardWidth, 70);
                
                // å¡ç‰‡è¾¹æ¡†
                ctx.strokeStyle = config.color + '40';
                ctx.lineWidth = 1;
                ctx.strokeRect(x, y, cardWidth, 70);

                // å›¾æ ‡å’Œæ•°å€¼
                ctx.fillStyle = config.color;
                ctx.font = 'bold 18px "Noto Sans SC", sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText(stat.value, x + cardWidth/2, y + 35);
                
                ctx.fillStyle = '#848e9c';
                ctx.font = '12px "Noto Sans SC", sans-serif';
                ctx.fillText(stat.label, x + cardWidth/2, y + 55);
            });
            y += 90;

            // 10. åˆ†éš”çº¿
            ctx.strokeStyle = config.color + '60';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(50, y);
            ctx.lineTo(width - 50, y);
            ctx.stroke();
            y += 30;

            // 11. æ•…äº‹æ ‡é¢˜
            ctx.fillStyle = config.color;
            ctx.font = 'bold 15px "Noto Sans SC", sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('ğŸ“– æˆ‘çš„å¸åœˆäººç”Ÿ', width/2, y);
            y += 25;

            // 12. æ•…äº‹å†…å®¹ï¼ˆå±…ä¸­å¯¹é½ï¼‰
            ctx.fillStyle = '#eaecef';
            ctx.font = 'bold 17px "Noto Sans SC", sans-serif';
            ctx.textAlign = 'center';
            
            const maxWidth = width - 80;
            const lineHeight = 28;
            const paraGap = lineHeight * 1.2;
            
            config.story.forEach((paragraph) => {
                const words = paragraph.split('');
                let line = '';
                const lines = [];
                
                // å…ˆå°†æ®µè½åˆ†å‰²æˆå¤šè¡Œ
                for (let i = 0; i < words.length; i++) {
                    const testLine = line + words[i];
                    const metrics = ctx.measureText(testLine);
                    
                    if (metrics.width > maxWidth && i > 0) {
                        lines.push(line);
                        line = words[i];
                    } else {
                        line = testLine;
                    }
                }
                if (line) {
                    lines.push(line);
                }
                
                // å±…ä¸­ç»˜åˆ¶æ¯è¡Œ
                for (const lineText of lines) {
                    if (y > height - 100) {
                        ctx.fillText('...', width/2, y);
                        return;
                    }
                    ctx.fillText(lineText, width/2, y);
                    y += lineHeight;
                }
                
                y += paraGap;
            });

            // 13. æœ¬å±€è§£é”æˆå°±
            const unlockedAchievements = config.unlockedAchievements || [];
            if (unlockedAchievements.length > 0 && y < height - 150) {
                y += 10;
                
                // åˆ†éš”çº¿
                ctx.strokeStyle = config.color + '40';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(80, y);
                ctx.lineTo(width - 80, y);
                ctx.stroke();
                y += 20;
                
                // æˆå°±æ ‡é¢˜
                ctx.fillStyle = config.color;
                ctx.font = 'bold 13px "Noto Sans SC", sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText('ğŸ† æœ¬å±€è§£é”æˆå°±', width/2, y);
                y += 22;
                
                // æˆå°±åˆ—è¡¨ - æ¯è¡Œæ˜¾ç¤º2ä¸ª
                const achievementColors = {
                    common: '#9ca3af',
                    uncommon: '#22c55e',
                    rare: '#3b82f6',
                    epic: '#a855f7',
                    legendary: '#f97316',
                    mythic: '#ef4444',
                    supreme: '#facc15'
                };
                
                const itemsPerRow = 2;
                const itemWidth = (width - 100) / itemsPerRow;
                
                for (let i = 0; i < unlockedAchievements.length && y < height - 100; i++) {
                    const ach = unlockedAchievements[i];
                    const col = i % itemsPerRow;
                    const row = Math.floor(i / itemsPerRow);
                    const itemX = 50 + col * itemWidth;
                    const itemY = y + row * 24;
                    
                    const achColor = achievementColors[ach.rarity] || '#9ca3af';
                    
                    // æˆå°±åç§°
                    ctx.fillStyle = achColor;
                    ctx.font = '12px "Noto Sans SC", sans-serif';
                    ctx.textAlign = 'left';
                    ctx.fillText(`âœ¦ ${ach.name}`, itemX, itemY);
                }
                
                // æ›´æ–° y åˆ°æˆå°±åˆ—è¡¨åº•éƒ¨
                const rows = Math.ceil(Math.min(unlockedAchievements.length, Math.floor((height - 100 - y) / 24)) / itemsPerRow);
                y += rows * 24 + 10;
            }

            // 14. åº•éƒ¨è£…é¥°ï¼ˆé«˜ç¨€æœ‰åº¦ï¼‰
            const bottomY = height - 50;
            
            if (config.rarity === 'supreme') {
                ctx.fillStyle = config.color;
                ctx.font = '50px serif';
                ctx.textAlign = 'center';
                ctx.fillText('ğŸ‘‘', width/2, bottomY);
            } else if (config.rarity === 'mythic') {
                ctx.fillStyle = config.color;
                ctx.font = '40px serif';
                ctx.textAlign = 'center';
                ctx.fillText('ğŸ”¥', width/2, bottomY);
            } else if (config.rarity === 'legendary') {
                ctx.fillStyle = config.color;
                ctx.font = '35px serif';
                ctx.textAlign = 'center';
                ctx.fillText('âš¡', width/2, bottomY);
            }

            // 15. åº•éƒ¨é“¾æ¥
            ctx.fillStyle = '#848e9c';
            ctx.font = '11px monospace';
            ctx.textAlign = 'center';
            ctx.fillText('mememax-edition.vercel.app', width/2, height - 20);

            // 16. æ˜Ÿæ˜Ÿè£…é¥°ï¼ˆé«˜ç¨€æœ‰åº¦éšæœºåˆ†å¸ƒï¼‰
            if (config.hasAnimation && config.rarity !== 'supreme') {
                ctx.fillStyle = config.color;
                const starPositions = [
                    [80, 150], [520, 180], [100, 300], 
                    [500, 350], [70, 500], [530, 550]
                ];
                starPositions.forEach(([sx, sy]) => {
                    ctx.font = '14px serif';
                    ctx.fillText('âœ¦', sx, sy);
                });
            }

            return canvas;
        }

        // åˆå§‹åŒ–ç»˜åˆ¶æ‰€æœ‰æµ·æŠ¥
        Object.keys(POSTER_CONFIG).forEach(key => {
            drawPoster('canvas-' + key, POSTER_CONFIG[key]);
        });

        // ä¸‹è½½åŠŸèƒ½
        function downloadPoster(rarity) {
            const canvas = document.getElementById('canvas-' + rarity);
            const link = document.createElement('a');
            link.download = `mememax-poster-${rarity}.png`;
            link.href = canvas.toDataURL();
            link.click();
        }

        // åˆ†äº«åŠŸèƒ½
        function shareTwitter(rarity) {
            const config = POSTER_CONFIG[rarity];
            const emoji = {common:'âšª',uncommon:'ğŸŸ¢',rare:'ğŸ”µ',epic:'ğŸŸ£',legendary:'ğŸŸ ',mythic:'ğŸ”´',supreme:'ğŸŸ¡'};
            
            const text = `ğŸ‰ åˆšåˆšåœ¨ã€Šå¸åœˆç”Ÿæ¶¯æ¨¡æ‹Ÿå™¨ã€‹è¾¾æˆäº†ã€${config.title}ã€‘ï¼\n\nğŸ’° å‡€èµ„äº§ï¼š${formatNumber(config.wealth)}\nâ±ï¸ å­˜æ´»ï¼š${config.years}å¹´\n${emoji[rarity]} ç¨€æœ‰åº¦ï¼š${config.rarityName}\n\n${config.story[0]}...\n\nmememax-edition.vercel.app`;
            
            const url = 'https://mememax-edition.vercel.app';
            const hashtags = 'å¸åœˆç”Ÿæ¶¯æ¨¡æ‹Ÿå™¨,MemeMax';
            
            const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}&hashtags=${hashtags}`;
            window.open(twitterUrl, '_blank');
        }

        function restartGame() {
            // åœ¨å®é™…æ¸¸æˆä¸­è¿™é‡Œä¼šé‡æ–°å¼€å§‹
            alert('ğŸ”„ å†æ¥ä¸€å±€ï¼ï¼ˆåœ¨å®é™…æ¸¸æˆä¸­ä¼šé‡æ–°å¼€å§‹ï¼‰');
        }
    </script>
</body>
</html>
